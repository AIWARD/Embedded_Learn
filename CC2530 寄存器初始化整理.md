# CC2530 寄存器初始化整理

```c
//配置寄存器中第一位为1时  
//(0000 0000)|(0000 0001)= 0000 0001 
P1DIR |=  0x01;
//配置寄存器中第二位为0时  ~(0000 0010) = (1111 1101)
//(1111 1111)& (1111 1101) = 1111 1101
P1DIR &= ~0x02;
```



## 1. LED

```c
#define LED1 P1_0
#define LED2 P1_1
#define LED3 P1_4
void main(void){
    LED1 = 1 ;//配置高电平，消除电势差，灭灯
    LED1 = 0 ;//配置低电平，产生电势差，点灯
    LED2 = 1 ;//配置高电平，消除电势差，灭灯
    LED2 = 0 ;//配置低电平，产生电势差，点灯
    LED3 = 1 ;//配置高电平，消除电势差，灭灯
    LED3 = 0 ;//配置低电平，产生电势差，点灯
}
```



### 1.1 LED1 

```c
#define LED1 P1_0 // LED1位于P1_0口
void InitLED(void){
    /*因为点灯时P1SEL和P1INP要设为默认值0，所以初始化时只初始化P1DIR即可*/
    P1DIR |= 0x01;  // 定义P1_0为输出口 设为0x00为输入方向
    P1SEL = 0x00;   // 设置端口功能为通用I/O功能 设为0x01为外设功能
    P1INP = 0x00;   // 设置端口的上拉/下拉电阻
}
```

### 1.2 LED2 

```c
#define LED2 P1_1 // LED2位于P1_0口
void InitLED(void){
    /*因为点灯时P1SEL和P1INP要设为默认值0，所以初始化时只初始化P1DIR即可*/
    P1DIR |= 0x02  // 定义P1_0为输出口 设为0x00为输入方向
    P1SEL = 0x00   // 设置端口功能为通用I/O功能 设为0x02为外设功能
    P1INP = 0x00   // 设置端口的上拉/下拉电阻 
}
```

### 1.3 LED3 

```CQL
#define LED3 P1_4  //LED3位于P1_4口
//P1_4口同时还兼有通信功能，烧程序用的仿真器就在P1_4上，要想观察LED3的效果，就要拔掉仿真器用usb供电
void InitLED(void){
    /*因为点灯时P1SEL和P1INP要设为默认值0，所以初始化时只初始化P1DIR即可*/
    P1DIR |= 0x10  // 定义P1_0为输出口 设为0x00为输入方向
    P1SEL = 0x00   // 设置端口功能为通用I/O功能 设为0x10为外设功能
    P1INP = 0x00   // 设置端口的上拉/下拉电阻 
}
```

### 1.4 同时初始化多个灯

```c
#define LED1 P1_0
#define LED2 P1_1
#define LED3 P1_4
void InitLED(void){
    /*因为点灯时P1SEL和P1INP要设为默认值0，所以初始化时只初始化P1DIR即可*/
    P1DIR |= 0x03 //LED1和LED2: 0000 0011 => 0x03
    // P1DIR |= 0x11 //LED1和LED3: 0001 0001 => 0x11
    // P1DIR |= 0x12 //LED2和LED3: 0001 0010 => 0x12
    // P1DIR |= 0x13 //LED1、LED2和LED3: 0001 0011 => 0x13
    
    P1SEL = 0x00  // 设置端口功能为外设功能 设为0x02为外设功能
    P1INP = 0x00  // 设置端口的上拉/下拉电阻 
}
```

## 2. key

```c
#define KEY2 P2_0
//在程序中按下按键会导通线路,出现电流,此时为1;不按下时为断路,无电流,此时为0
uchar KeyScan(void){
	//简单的按键检测函数
	if (KEY1 == 0){
		DelayMS(10);  //自己定义的延时函数，随便一个循环计数，达到计时目的即可
		if (KEY1 == 0){
			while(!KEY1);
			return 1;
		}
	}
}
```

### 2.1 key1

```c
#define KEY1 P0_1
void InitKey(void){
    P0SEL &= ~0x02 ; //配置端口功能为通用I/O功能 设为0x10为外设功能
    P0DIR &= ~0x02 ; //定义P0_1为输入口 设为0x02为输出端口
    P0INP &= ~0x02 ; //设置端口的上拉/下拉电阻
}
```

### 2.2 key2

```c
#define KEY2 P2_0
void InitKey(void){
	P2SEL &= ~0x01 ; //配置端口功能为通用I/O功能 设为0x01为外设功能
	P2DIR &= ~0x01 ; //定义P2_0为输入口 设为0x01为输出端口
	P2INP &= ~0x01 ; //设置端口的上拉/下拉电阻
}
```





---

# to be continuintg......